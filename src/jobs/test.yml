description: >
  npm run test

executor: default

parameters:
  cdk_directory:
    description: the directory where your cdk app resides
    type: string
    default: "."
  npm_params:
    description: the parameters to pass the `npm run test` command
    type: string
    default: ""

steps:
  - npm:
      npm_command: run
      npm_params: test << parameters.npm_params >>
      npm_directory: << parameters.cdk_directory >>
  # TODO collect test data
  # https://circleci.com/docs/2.0/collect-test-data/#jest
